function zeroPad(a,d){var b=String(d).length-String(a).length+1;return 0<b?Array(b).join("0")+a:a}angular.element(document).ready(function(){angular.bootstrap(document,["docsApp"])});
DocsApp.value("ApiURL","./api/index.php").config(["COMPONENTS","DEMOS","PAGES","$routeProvider","$mdThemingProvider",function(a,d,b,c,f){c.when("/camdata",{controller:"CamdataCtrl",templateUrl:"partials/camdata.tpl.html"}).when("/poctyvozidiel",{controller:"SpacedataCtrl",templateUrl:"partials/spacedata.tpl.html"}).when("/statistika",{controller:"CampstatCtrl",templateUrl:"partials/campstat.tpl.html"}).when("/ratingplochy",{controller:"ArealetterCtrl",templateUrl:"partials/areafiles.tpl.html"}).when("/kampane",
{controller:"CampaignsCtrl",templateUrl:"partials/campaigns.tpl.html"}).when("/kampane/plochy",{controller:"CampareasCtrl",templateUrl:"partials/campareas.tpl.html"}).when("/pouzivatelia",{controller:"CfgusersCtrl",templateUrl:"partials/cfgusers.tpl.html"}).when("/plochy",{controller:"AreaCtrl",templateUrl:"partials/area.tpl.html"}).when("/kamery",{controller:"ArecamCtrl",templateUrl:"partials/arecam.tpl.html"}).when("/zakaznici",{controller:"CustomersCtrl",templateUrl:"partials/customers.tpl.html"}).when("/ftppristup",
{controller:"CfgftpCtrl",templateUrl:"partials/cfgftp.tpl.html"}).when("/cfgevlp",{controller:"CfgevlpCtrl",templateUrl:"partials/cfgevlp.tpl.html"}).when("/cfgcoef",{controller:"CfgcoefCtrl",templateUrl:"partials/cfgcoef.tpl.html"}).when("/cfgemail",{controller:"CfgemailCtrl",templateUrl:"partials/cfgemail.tpl.html"}).when("/getting-started",{templateUrl:"partials/getting-started.tmpl.html"});f.theme("docs-dark","default").primaryPalette("yellow").dark();angular.forEach(b,function(a){angular.forEach(a,
function(a){c.when(a.url,{templateUrl:a.outputPath,controller:"GuideCtrl"})})});angular.forEach(a,function(a){angular.forEach(a.docs,function(b){b.url="/"+b.url;c.when(b.url,{templateUrl:b.outputPath,resolve:{component:function(){return a},doc:function(){return b}},controller:"ComponentDocCtrl"})})});angular.forEach(d,function(g){var b;angular.forEach(a,function(a){g.name===a.name&&(b=a)});b=b||angular.extend({},g);c.when(g.url,{templateUrl:"partials/demo.tmpl.html",controller:"DemoCtrl",resolve:{component:function(){return b},
demos:function(){return g.demos}}})});c.otherwise("/kampane")}]).factory("CurrentYM",[function(){return{initTabs:function(a){var d=new Date;a.appYears=[d.getFullYear()+1,d.getFullYear(),d.getFullYear()-1];a.tabs=[{title:"Jan",idx:"01"},{title:"Feb",idx:"02"},{title:"Mar",idx:"03"},{title:"Apr",idx:"04"},{title:"Maj",idx:"05"},{title:"Jun",idx:"06"},{title:"J\u00fal",idx:"07"},{title:"Aug",idx:"08"},{title:"Sep",idx:"09"},{title:"Okt",idx:"10"},{title:"Nov",idx:"11"},{title:"Dec",idx:"12"}];a.$parent.$root.currentYM?
(a.selY=a.$parent.$root.currentYM.currentY,a.selM=a.$parent.$root.currentYM.currentM):(a.selY=d.getFullYear(),a.selM=d.getMonth())},saveYM:function(a,d,b){a.$parent.$root.currentYM={currentY:d,currentM:b}}}}]).factory("AppData",["$http","$q","$mdDialog","$timeout","ApiURL",function(a,d,b,c,f){return{request:function(b,e,c){var h=d.defer();b={responseType:"json",method:b,url:f+"/"+e};c&&(b.data=c);a(b).success(function(a){h.resolve(a)}).error(function(){h.reject()});return h.promise},clearInputData:function(a){if(a&&
"undefined"!==typeof a.isArray)for(var b=0;b<a.length;b++)"_expanded"in a[b]&&delete a[b]._expanded;return a},clearOutputData:function(a){a&&angular.isArray(a)&&!1===a[0]&&a.splice(0,1);return a},PreList:function(a){a.scope.processData=!0;a.scope.expandedNew=!1;a.scope.rowdata={};a.scope.rowid=null;a.scope.search="";a.scope.openDetail=function(b){if(b){if(a.scope.expandedNew&&(a.scope.expandedNew=!1),a.scope.rowdata={},a.scope.rowid=null,a.scope.items)for(var c=0;c<a.scope.items.length;c++)b!==a.scope.items[c]?
a.scope.items[c]._expanded=!1:(a.scope.rowdata=a.scope.items[c],a.scope.rowid=a.scope.items[c].id,b._expanded||(b._expanded=!0))}else{a.scope.rowdata={};a.scope.rowid=null;if(a.scope.items)for(c=0;c<a.scope.items.length;c++)a.scope.items[c]._expanded&&(a.scope.items[c]._expanded=!1);a.scope.expandedNew||(a.scope.expandedNew=!0)}};a.scope.closeDetail=function(b){if(b){if(a.scope.items)for(b=0;b<a.scope.items.length;b++)a.scope.items[b]._expanded=!1}else a.scope.expandedNew=!1}},PosList:function(a,
b){a.scope.processData=!0;if(b=this.clearOutputData(b))for(var c=0;c<b.length;c++)b[c]._expanded=!1;a.scope.items=b;a.scope.processData=!1},Update:function(a){a.scope.destroy=function(e){e=b.confirm().title("Vymaza\u0165 polo\u017eku").content("Chcete vymaza\u0165 t\u00fato polo\u017eku?").ariaLabel("Vymaza\u0165 polo\u017eku").ok("\u00c1no").cancel("Nie").targetEvent(e);b.show(e).then(function(){a.me.delItem(a.name,a.scope.rowdata).then(function(b){b=a.me.clearOutputData(b);a.scope.rowdata={};a.scope.rowid=
null;if(a.scope.items=b)for(var e=0;e<b.length;e++)b[e]._expanded=!1;a.scope.expandedNew=!1})},function(){})};a.scope.save=function(){a.scope.processData=!0;void 0==a.scope.rowid?a.me.newItem(a.name,a.scope.rowdata).then(function(b){if(b=a.me.clearOutputData(b))for(var c=0;c<b.length;c++)b[c]._expanded=!1;a.scope.items=b;a.scope.expandedNew=!1}):a.me.updItem(a.name,a.scope.rowdata).then(function(b){if(b=a.me.clearOutputData(b))for(var c=0;c<b.length;c++)b[c]._expanded=!1;a.scope.items=b;a.scope.expandedNew=
!1});a.scope.processData=!1}}}}]).factory("DbData",["AppData","$mdDialog",function(a,d){return{clearOutputData:function(b){return a.clearOutputData(b)},getItems:function(b){return a.request("GET",b)},newItem:function(b,c){return a.request("POST",b,a.clearInputData(c))},delItem:function(b,c){return a.request("DELETE",b,c)},updItem:function(b,c){return a.request("PUT",b,a.clearInputData(c))},setValues:function(b,c){return a.request("PUT",b,c)},PreList:function(a){a.scope.processData=!0;a.scope.expandedNew=
!1;a.scope.rowdata={};a.scope.rowid=null;a.scope.search="";a.scope.expandedNew&&(a.scope.expandedNew=!1);if(a.scope.items)for(var c=0;c<a.scope.items.length;c++)a.scope.rowdata=a.scope.items[c],a.scope.rowid=a.scope.items[c].id,a.scope.items[c]._expanded=!1},List:function(b){a.PreList(b);this.getItems(b.name).then(function(c){a.PosList(b,c)})},PosList:function(b,c){a.PosList(b,c)},Update:function(b){a.Update(b)},Dict:function(a){this.getDataItems(a.name,a.field).then(function(c){a.scope[a.dict]=c})}}}]).factory("ConfigData",
["AppData","$mdDialog",function(a,d){return{clearOutputData:function(b){return a.clearOutputData(b)},getItems:function(b){return a.request("GET","config?_Data_="+b)},getDataItems:function(b,c){return a.request("GET","config?_Data_="+b+"&_Field_="+c)},newItem:function(b,c){return a.request("POST","config?_Data_="+b,a.clearInputData(c))},delItem:function(b,c){return a.request("DELETE","config?_Data_="+b,c)},updItem:function(b,c){return a.request("PUT","config?_Data_="+b,a.clearInputData(c))},setValues:function(b,
c){return a.request("PUT","config?_Values_="+b,c)},List:function(b){a.PreList(b);this.getItems(b.name).then(function(c){if(c=a.clearOutputData(c))for(var d=0;d<c.length;d++)c[d]._expanded=!1;b.scope.items=c})},PosList:function(b,c){a.PosList(b,c)},Update:function(b){a.Update(b)},Dict:function(a){this.getDataItems(a.name,a.field).then(function(c){a.scope[a.dict]=c})},Values:function(b){this.getItems(b.name).then(function(a){b.scope.items=a});b.scope.save=function(c){b.me.setValues(b.name,a.clearOutputData(b.scope.items)).then(function(a){d.show(d.alert().title("Ulo\u017eenie \u00fadajov").content(b.message).ariaLabel("Ulo\u017eenie \u00fadajov").ok("Zatvori\u0165").targetEvent(c))})}}}}]).factory("menu",
["COMPONENTS","DEMOS","PAGES","$location","$rootScope",function(a,d,b,c,f){var g=[{name:"Z\u00e1kazn\u00edci",url:"/zakaznici",type:"link"},{name:"Kampane",url:"/",type:"toggle",pages:[{name:"Z\u00e1kladn\u00e9 \u00fadaje",url:"/kampane",type:"link"},{name:"\u0160tatistika kampane",url:"/statistika",type:"link"}]},{name:"Reklamn\u00e9 plochy",url:"/",type:"toggle",pages:[{name:"Plochy",url:"/plochy",type:"link"},{name:"Plochy/kamery",url:"/kamery",type:"link"},{name:"Po\u010dty vozidiel",url:"/poctyvozidiel",
type:"link"},{name:"Rating plochy",url:"/ratingplochy",type:"link"}]},{name:"\u00dadaje z kamier",url:"/camdata",type:"link"},{name:"Nastavenia",url:"/",type:"toggle",pages:[{name:"Pou\u017e\u00edvatelia",url:"/pouzivatelia",type:"link"},{name:"Koeficienty",url:"/cfgcoef",type:"link"},{name:"E-mail",url:"/cfgemail",type:"link"},{name:"Ftp pr\u00edstup",url:"/ftppristup",type:"link"}]}],e={},k={};a.forEach(function(a){a.docs.forEach(function(a){angular.isDefined(a["private"])||(k[a.type]=k[a.type]||
[],k[a.type].push(a),e[a.module]=e[a.module]||[],e[a.module].push(a))})});var h;return f.$on("$locationChangeSuccess",function(){var a=c.path(),b=function(b,e){a===e.url&&(h.selectSection(b),h.selectPage(b,e))};g.forEach(function(a){a.children?a.children.forEach(function(a){a.pages&&a.pages.forEach(function(e){b(a,e)})}):a.pages?a.pages.forEach(function(e){b(a,e)}):"link"===a.type&&b(a,a)})}),h={sections:g,selectSection:function(a){h.openedSection=a},toggleSelectSection:function(a){h.openedSection=
h.openedSection===a?null:a},isSectionSelected:function(a){return h.openedSection===a},selectPage:function(a,b){b&&b.url&&c.path(b.url);h.currentSection=a;h.currentPage=b},isPageSelected:function(a){return h.currentPage===a}}}]);
DocsApp.controller("CfgftpCtrl",["$scope","$mdDialog","ConfigData",function(a,d,b){b.Values({name:"cfgftp",scope:a,me:b,message:"\u00dadaje pre Ftp pr\u00edstup boli ulo\u017een\u00e9 na webserver."})}]).controller("CfgevlpCtrl",["$scope","$mdDialog","ConfigData",function(a,d,b){b.Values({name:"cfgevlp",scope:a,me:b,message:"\u00dadaje pre Ftp pr\u00edstup boli ulo\u017een\u00e9 na webserver."})}]).controller("CfgcoefCtrl",["$scope","$mdDialog","ConfigData",function(a,d,b){b.Values({name:"cfgcoef",
scope:a,me:b,message:"\u00dadaje pre koeficienty v\u00fdpo\u010dtu boli ulo\u017een\u00e9 na webserver."})}]).controller("CfgemailCtrl",["$scope","$mdDialog","ConfigData",function(a,d,b){b.Values({name:"cfgemail",scope:a,me:b,message:"Nastavenia emailov ulo\u017een\u00e9 na webserver."})}]).controller("CfgusersCtrl",["$scope","$mdDialog","ConfigData",function(a,d,b){b.List({name:"cfgusers",scope:a,me:b});b.Update({name:"cfgusers",scope:a,me:b});a.toggleRight=function(){$mdSidenav("right").toggle().then(function(){$log.debug("toggle RIGHT is done")})}}]).controller("AreaCtrl",
["$scope","$mdDialog","DbData","ApiURL",function(a,d,b,c){b.List({name:"areas",scope:a,me:b});b.Update({name:"areas",scope:a,me:b});a.setFile=function(c){a.$apply(function(a){b.newItem("picture/"+c.files[0].name,c.files[0]).then(function(b){a.rowdata.image=b})})}}]).controller("ArecamCtrl",["$scope","$mdDialog","DbData",function(a,d,b){b.getItems("camdata").then(function(b){a.cameras=b});b.List({name:"areas",scope:a,me:b});a.UpdCam=function(c,d){b.updItem("camdata/camera",{spcode:c,camcode:d}).then(function(b){for(var e=
0;e<a.items.length;e++)if(c==a.items[e].spcode){a.items[e].cameras=b.cameras;a.items[e].viewtypes=b.viewtypes;break}})};a.UpdCamview=function(c,d,g){b.updItem("camdata/viewtype",{spcode:c,camcode:d,viewtype:g}).then(function(b){for(var g=0;g<a.items.length;g++)if(c==a.items[g].spcode){a.items[g].viewtypes=b.viewtypes;break}})};a.GetCameraClass=function(a,b){return a&&b in a?"md-raised md-primary":"md-raised"};a.GetViewClass=function(a,b,g){return a&&a[b]&&a[b]==g?"md-primary md-raised md-hue-3":""};
a.isCamDisabled=function(a,b){return a&&b in a?!1:!0}}]).controller("CustomersCtrl",["$scope","$mdDialog","DbData",function(a,d,b){b.List({name:"customers",scope:a,me:b});b.Update({name:"customers",scope:a,me:b})}]).factory("DlgEmail",["$mdDialog","DbData",function(a,d){return{ShowDlg:function(b,c,f){d.getItems("eml/texts").then(function(a){b.SetEmailTexts(f,a)});a.show({controller:this.DlgEmailCtrl,templateUrl:"partials/dlgemail.tpl.html",targetEvent:c,locals:{item:f}}).then(function(g){b.processData=
!0;b.PostEmail(g).then(function(e){b.processData=!1;e.error?a.show(a.alert().title("Odoslanie \u00fadajov").content(e.error).ariaLabel("Odoslanie \u00fadajov").ok("Zatvori\u0165").targetEvent(c)):a.show(a.alert().title("Odoslanie \u00fadajov").content("Odoslanie \u00fadajov prebehlo \u00faspe\u0161ne").ariaLabel("Odoslanie \u00fadajov").ok("Zatvori\u0165").targetEvent(c))})},function(){});this.DlgEmailCtrl.$inject=["$scope","$mdDialog","item"]},DlgEmailCtrl:function(a,c,d){a.item=d;a.hide=function(){c.hide()};
a.cancel=function(){c.cancel()};a.answer=function(a){c.hide(a)}}}}]).factory("DlgLog",["$mdDialog","DbData",function(a,d){return{ShowLog:function(b,c){function f(a,b,c){a.items=c;a.hide=function(){b.hide()};a.cancel=function(){b.cancel()}}d.getItems("applog/"+c).then(function(c){a.show({controller:f,templateUrl:"partials/dlglog.tpl.html",targetEvent:b,locals:{items:c}}).then(function(a){});f.$inject=["$scope","$mdDialog","items"]})}}}]).controller("CampaignsCtrl",["$scope","$mdDialog","DbData","$locale",
"$timeout",function(a,d,b,c,f){a.loadCustomers=function(){a.customers=[];b.getItems("customers").then(function(b){a.customers=b;a.$$loadingAsyncDone=!0})};b.List({name:"campaigns",scope:a,me:b});b.Update({name:"campaigns",scope:a,me:b});a.setFile=function(c){a.$apply(function(a){b.newItem("picture/"+c.files[0].name,c.files[0]).then(function(b){a.rowdata.image=b})})};a.setItemFile=function(c){a.$apply(function(a){b.newItem("picture/"+c.files[0].name,c.files[0]).then(function(a){var e=angular.element(c.parentElement).scope();
e.ardata.image=a;b.updItem("arearent/"+e.ardata.idcc+"/pict",{idcc:e.ardata.idcc,cid:e.ardata.id,image:a}).then(function(a){})})})};a.detailType="det";b.getItems("areas").then(function(b){a.areas=b});a.UpdArea=function(c,e){b.updItem("campaigns/area",{campcode:c,spcode:e}).then(function(b){for(var e=0;e<a.items.length;e++)if(c==a.items[e].campcode){a.items[e].areas=b;break}})};a.GetAreaClass=function(a,b){return a&&b in a?"md-raised md-primary":""};a.GetAreaIf=function(a,b){return a&&b in a?!0:!1};
a.exists=function(a,b){return-1<b.indexOf(a)};a.openDetailEx=function(c,e){b.PreList({name:"campstat",scope:a,me:b});a.detailType=c;"datas"==c?(a.expandedNew=!1,e._expanded=!0,a.getArearent(e)):("areas"==c&&b.getItems("campaign/"+e.id+"/areas").then(function(a){e.areasigns=a}),a.openDetail(e))};a.getArearent=function(a){b.getItems("arearent/"+a.id).then(function(b){a.arearent=b})};a.newArearent=function(a){b.newItem("arearent/"+a.id,{campcode:a.campcode}).then(function(b){a.arearent=b})};a.delArearent=
function(a,c){b.delItem("arearent/"+a.id+"/"+c).then(function(b){a.arearent=b})};a.saveArearent=function(a,c){b.updItem("arearent/"+a.id,c).then(function(b){a.arearent=b})};a.saveArearentMon=function(a,c,d,f){b.updItem("arearent/"+a.id,{id:c.id,fld:d,val:!f}).then(function(b){a.arearent=b})};a.saveArearentPrice=function(a,c,d,h){h&&(c.olenetprice=d);c.olenetprice!=c.netprice&&b.updItem("arearent/"+c.idcc+"/area",{idcc:c.idcc,cid:a.id,netprice:d}).then(function(b){a.arearent=b;f(function(){var a=document.getElementById("netprice"+
c.id);a&&a.focus()})})};a.hidePopup=function(a){angular.element(a.path[1]).scope().isVisible=!1};a.saveArearentItems=function(c,e,d,f){b.updItem("arearentcmd",{cid:d.id,id:f.id,idcc:f.idcc,cmd:e,campcode:f.campcode,spcode:f.spcode,year:f.year}).then(function(a){a&&(d.arearent=a)});a.hidePopup(c)};a.closeDetailEx=function(b){a.detailType="det";a.closeDetail(b)};a.getCampareas=function(a){b.getItems("campareas/"+a.id).then(function(b){a.areaprices=b})};a.saveCampareas=function(a,c,f){b.updItem("campareas/"+
c.id,f).then(function(b){c.arearent=b;d.show(d.alert().title("Ulo\u017eenie \u00fadajov").content("Cena plochy bola zmenen\u00e1").ariaLabel("Ulo\u017eenie \u00fadajov").ok("Zatvori\u0165").targetEvent(a))})}}]).controller("CampstatCtrl",["$scope","$mdDialog","DbData","$locale","DlgEmail","DlgLog",function(a,d,b,c,f,g){a.detailType="";b.List({name:"campstat",scope:a,me:b});a.openDetailEx=function(c,d){b.PreList({name:"campstat",scope:a,me:b});a.detailType=c;a.processData=!1;a.expandedNew=!1;d._expanded=
!0};a.closeDetailEx=function(b){a.detailType="";a.closeDetail(b)};a.ShowLog=function(a){g.ShowLog(a,"bgb")};a.ShowEmailDlg=function(b,c){if("all"==c.typestat){var d=[{filename:"stat_"+c.xname+".pdf"},{filename:"stat_"+c.xname+".xlsx"}];f.ShowDlg(a,b,{year:null,id:c.id,sendto:c.email,disable:!0,attachments:d})}else d=[{filename:"stat_"+c.xname+"_"+c.typestat.substring(5,7)+"_"+c.typestat.substring(0,4)+".pdf"},{filename:"stat_"+c.xname+"_"+c.typestat.substring(5,7)+"_"+c.typestat.substring(0,4)+".xlsx"}],
f.ShowDlg(a,b,{year:c.typestat.substring(0,4),month:c.typestat.substring(5,7),id:c.id,sendto:c.email,disable:!0,attachments:d})};a.SetEmailTexts=function(a,b){a.msg=b.statMsg};a.PostEmail=function(a){return b.newItem("eml/stat",{year:a.year,month:a.month,id:a.id,message:a.msg})}}]).controller("CampareasCtrl",["$scope","$mdDialog","DbData",function(a,d,b){b.getItems("areas").then(function(b){a.areas=b});b.List({name:"campaigns",scope:a,me:b});a.UpdArea=function(c,d){b.updItem("campaigns/area",{campcode:c,
spcode:d}).then(function(b){for(var e=0;e<a.items.length;e++)if(c==a.items[e].campcode){a.items[e].areas=b;break}})};a.GetAreaClass=function(a,b){return a&&b in a?"md-raised md-primary":""}}]).controller("CamdataCtrl",["$scope","CurrentYM","$mdDialog","DbData",function(a,d,b,c){d.initTabs(a);a.LoadData=function(b,d){c.List({name:"camdata/"+b+"/"+(d+1),scope:a,me:c})};a.DownloadData=function(){var b={name:"camdata/"+a.selY+"/"+(a.selM+1),scope:a,me:c};a.processData=!0;c.updItem(b.name).then(function(a){c.PosList(b,
a)})};a.$watch("selY",function(b,c){c&&c!=b&&(d.saveYM(a,b,a.selM),a.LoadData(b,a.selM))});a.$watch("selM",function(b,c){c&&c!=b&&(d.saveYM(a,a.selY,b),a.LoadData(a.selY,b))});a.LoadData(a.selY,a.selM)}]).controller("SpacedataCtrl",["$scope","CurrentYM","$mdDialog","DbData","DlgLog",function(a,d,b,c,f){d.initTabs(a);a.LoadData=function(b,e){c.List({name:"spacedata/"+b+"/"+(e+1),scope:a,me:c})};a.Calculate=function(){var b={name:"spacedata/"+a.selY+"/"+(a.selM+1),scope:a,me:c};a.processData=!0;c.updItem(b.name).then(function(a){c.PosList(b,
a)})};a.$watch("selY",function(b,c){c&&c!=b&&d.saveYM(a,b,a.selM);a.LoadData(b,a.selM)});a.$watch("selM",function(b,c){c&&c!=b&&d.saveYM(a,a.selY,b);a.LoadData(a.selY,b)});a.ShowLog=function(a){f.ShowLog(a,"rat")};a.LoadData(a.selY,a.selM)}]).controller("ArealetterCtrl",["$scope","CurrentYM","$mdDialog","DbData","DlgEmail","DlgLog",function(a,d,b,c,f,g){c.getItems("areas").then(function(b){a.areas=b});d.initTabs(a);a.LoadData=function(b,d){c.List({name:"areafiles/"+b+"/"+d,scope:a,me:c})};c.Update({name:"areafiles/"+
a.selY,scope:a,me:c});a.$watch("selY",function(b,c){c&&c!=b&&d.saveYM(a,b,a.selM);a.LoadData(b,a.selM)});a.$watch("selM",function(b,c){c&&c!=b&&d.saveYM(a,a.selY,b);a.LoadData(a.selY,b)});a.DownloadFile=function(b,d){c.getItems("areafiles/"+d+"/"+b+"/"+a.selY+"/"+a.selM).then(function(a){})};a.ShowEmailDlg=function(b,c){var d=[{filename:c.spcode.replace("/","-")+zeroPad(a.selM,10)+"_"+zeroPad(a.selY,1E3)+".pdf"}];f.ShowDlg(a,b,{year:a.selY,month:a.selM,id:c.id,sendto:" ",disable:!1,attachments:d})};
a.SetEmailTexts=function(a,b){a.sendto=b.reflSender;a.msg=b.reflMsg};a.ShowLog=function(a){g.ShowLog(a,"refl")};a.PostEmail=function(a){return c.newItem("eml/refl",{year:a.year,month:a.month,id:a.id,sendto:a.sendto,message:a.msg})}}]).directive("stringToNumber",function(){return{require:"ngModel",link:function(a,d,b,c){c.$parsers.push(function(a){return""+a});c.$formatters.push(function(a){return parseFloat(a,10)})}}}).directive("mdPopupmenu",["$timeout","$log",function(a,d){return{restrict:"E",transclude:!0,
scope:{value:"=",icon:"=",direction:"=",name:"=",cascade:"=",scrollCount:"=scrollCount"},link:["$scope",function(b,c){b.menu=c.children()[3];b.itemNumber=b.scrollCount&&0<b.scrollCount?b.scrollCount:b.menu.children.length;b.itemHeight=b.cascade?32:45;b.menuHeight=b.itemNumber*b.itemHeight;a(function(){angular.element(b.menu).css("margin-left",-1*(c.children()[2].offsetWidth+15)+"px")},0)}],controller:["$scope",function(a){a.isVisible=!1}],template:'<style>#{{name}}.md-menu {position: absolute;z-index: 25;box-shadow: 0px 6px 12px rgba(0,0,0,0.25);-webkit-box-shadow: 0px 6px 12px rgba(0,0,0,0.25);background-color: rgba(255,255,255,1);display:static;height:{{menuHeight}}px;overflow-y:auto;overflow-x:hidden;margin-top:-{{(direction == \'up\') ? menuHeight-(itemHeight-8) : 8;}}px;}#{{name}}.md-menu.ng-hide-add, #{{name}}.md-menu.ng-hide-remove {transition: all .2s linear;-webkit-transition: all .2s linear;overflow: hidden;height: {{menuHeight}}px;margin-top:-{{(direction == \'up\') ? menuHeight-(itemHeight-8) : 8;}}px;}#{{name}}.md-menu.ng-hide {height: 0%;margin-top:{{(direction == \'up\') ? 0 : -8;}}px;}</style><span ng-show="isVisible" ng-click="isVisible=false" class="md-menu-bg"></span><md-button class="md-fab md-hue-1 aplbtnsize" aria-label="{{value}}" ng-click="isVisible=!isVisible"><ng-md-icon icon="{{icon}}"></ng-md-icon></md-button><span ng-show="isVisible" id="{{name}}" class="md-menu" ng-transclude></span>'}}]).controller("mdSelect2Controller",
["$scope",function(a){a.selectActive=!1;a.selectedItemIndex=-1;a.toggleActive=function(){a.selectActive=!a.selectActive};a.toggleSelectedItem=function(d){a.updateActiveItem(angular.element(d.target))}}]).directive("mdSelect2",["$log",function(a){return{restrict:"E",controller:"mdSelect2Controller",scope:!0,link:function(d,b,c){var f=b.find("button");b.find("ul");var g=b.find("li");g.attr({tabIndex:"-1",role:"menuitem"});d.numChildItems=g.length;f.on("focus",function(b){a.debug(b.target.getAttribute("id"))});
g.on("focus",function(b){a.debug(b.target.getAttribute("id"))});d.updateActiveItem=function(a){g.removeClass("active");a.addClass("active").focus();f.text(a.text()).focus()};b.on("click",function(a){});d.click=function(a){d.toggleSelectedItem(a);for(var b=0;b<d.numChildItems;b++)g[b]===a.target&&(d.selectedItemIndex=b);d.toggleActive()};d.keydown=function(c){27===c.keyCode&&d.toggleActive();if(38===c.keyCode||40===c.keyCode)c.preventDefault(),38===c.keyCode&&0<d.selectedItemIndex&&d.selectedItemIndex--,
40===c.keyCode&&d.selectedItemIndex<d.numChildItems-1&&(d.selectedItemIndex++,a.debug(d.selectedItemIndex)),d.updateActiveItem(b.find("li").eq(d.selectedItemIndex)),13===c.keyCode&&f.focus()}}}}]);
